this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["login/link/linking"]=function(n,a,l,t,i){function e(){return'\n  <div class="alert alert-error">\n    Another user is already registered with this identity.\n    Please <a data-hull-action="logout" class="btn-link btn-inline">sign out</a> first if you want to use it.\n  </div>\n'}function s(n,a){var t,i,e,s="";return s+="\n\n\n<ul class=\"unstyled\">\n  <li>\n    <p>\n      <div class='media'>\n        ",t=l["if"].call(n,(t=n&&n.me,null==t||t===!1?t:t.picture),{hash:{},inverse:v.noop,fn:v.program(4,o,a),data:a}),(t||0===t)&&(s+=t),s+='\n        <div class="media-body">\n          <h4 class="media-heading">'+m((t=n&&n.me,t=null==t||t===!1?t:t.name,typeof t===f?t.apply(n):t))+"</h4>\n          via "+m((t=n&&n.me,t=null==t||t===!1?t:t.main_identity,typeof t===f?t.apply(n):t))+',\n          <a data-hull-action="logout" class="btn-link btn-inline">\n            Sign Out\n          </a>\n        </div>\n      </div>\n    </p>\n  </li>\n  ',e={hash:{},inverse:v.noop,fn:v.program(6,h,a),data:a},(i=l.authServices)?t=i.call(n,e):(i=n&&n.authServices,t=typeof i===f?i.call(n,e):i),l.authServices||(t=y.call(n,t,{hash:{},inverse:v.noop,fn:v.program(6,h,a),data:a})),(t||0===t)&&(s+=t),s+="\n</ul>\n\n\n"}function o(n){var a,l="";return l+='\n        <div class="pull-left">\n          <img class="media-object img-rounded" src="'+m((a=n&&n.me,a=null==a||a===!1?a:a.picture,typeof a===f?a.apply(n):a))+'" alt="'+m((a=n&&n.me,a=null==a||a===!1?a:a.name,typeof a===f?a.apply(n):a))+'" width="50px" height="50px">\n        </div>\n        '}function h(n,a){var t,i="";return i+="\n  ",t=l["if"].call(n,n&&n.availableAction,{hash:{},inverse:v.noop,fn:v.program(7,u,a),data:a}),(t||0===t)&&(i+=t),i+="\n  "}function u(n,a){var t,i,e,s="";return s+='\n  <li>\n    <button data-hull-action="',(i=l.availableAction)?t=i.call(n,{hash:{},data:a}):(i=n&&n.availableAction,t=typeof i===f?i.call(n,{hash:{},data:a}):i),s+=m(t)+'" data-hull-provider="',(i=l.name)?t=i.call(n,{hash:{},data:a}):(i=n&&n.name,t=typeof i===f?i.call(n,{hash:{},data:a}):i),s+=m(t)+'" class="btn btn-small ',t=l["if"].call(n,n&&n.identity,{hash:{},inverse:v.noop,fn:v.program(8,r,a),data:a}),(t||0===t)&&(s+=t),s+='">\n      <i class="icon-',(i=l.name)?t=i.call(n,{hash:{},data:a}):(i=n&&n.name,t=typeof i===f?i.call(n,{hash:{},data:a}):i),s+=m(t)+'"></i>\n      '+m((i=l.classify||n&&n.classify,e={hash:{},data:a},i?i.call(n,n&&n.actionName,e):g.call(n,"classify",n&&n.actionName,e)))+"\n      your\n      "+m((i=l.classify||n&&n.classify,e={hash:{},data:a},i?i.call(n,n&&n.name,e):g.call(n,"classify",n&&n.name,e)))+"\n      account\n    </button>\n  </li>\n  "}function r(){return"btn-success"}function c(){return'\n<div data-hull-component="login/button@hull"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],l=this.merge(l,n.helpers),i=i||{};var d,p="",f="function",m=this.escapeExpression,v=this,g=l.helperMissing,y=l.blockHelperMissing;return d=l["if"].call(a,a&&a.authHasFailed,{hash:{},inverse:v.noop,fn:v.program(1,e,i),data:i}),(d||0===d)&&(p+=d),p+="\n\n",d=l["if"].call(a,a&&a.loggedIn,{hash:{},inverse:v.program(10,c,i),fn:v.program(3,s,i),data:i}),(d||0===d)&&(p+=d),p+="\n"},Hull.component("login/link@hull",{type:"Hull",templates:["linking"],refreshEvents:["model.hull.me.change"],initialize:function(){this.sandbox.on("hull.auth.login",function(){this.authHasFailed=!1,this.render()},this),this.sandbox.on("hull.auth.failure",function(){this.authHasFailed=!0,this.render()},this)},beforeRender:function(n){var a=this.sandbox.util._,l=[],t=this.loggedIn()||{},i=n.me&&n.me.main_identity;a.map(this.authServices(),function(n){var a,e,s=n,o=!!t[s],h=s!==i;o?h&&(a="unlinkIdentity",e="unlink"):(a="linkIdentity",e="link"),l.push({isConnected:o,name:s,canDisconnect:h,availableAction:a,actionName:e,identity:t[s]})}),n.authServices=l,n.authHasFailed=this.authHasFailed,this.authHasFailed=!1}});