this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["votes/button/main"]=function(t,e,n,o,a){function i(t,e){var o,a="";return a+="\n  ",o=n["if"].call(t,t&&t.canVote,{hash:{},inverse:f.noop,fn:f.program(2,r,e),data:e}),(o||0===o)&&(a+=o),a+="\n\n  ",o=n["if"].call(t,t&&t.noRemainingObject,{hash:{},inverse:f.noop,fn:f.program(4,s,e),data:e}),(o||0===o)&&(a+=o),a+="\n\n  ",o=n["if"].call(t,t&&t.noRemainingPeriod,{hash:{},inverse:f.noop,fn:f.program(6,l,e),data:e}),(o||0===o)&&(a+=o),a+="\n"}function r(){return'\n    <button class="btn" data-hull-action="vote">Vote</button>\n  '}function s(t,e){var o,a,i,r="";return r+='\n    <p>No remaining vote for "',(a=n.targetName)?o=a.call(t,{hash:{},data:e}):(a=t&&t.targetName,o=typeof a===h?a.call(t,{hash:{},data:e}):a),r+=m(o)+'". Come back '+m((a=n.fromNow||t&&t.fromNow,i={hash:{},data:e},a?a.call(t,(o=t&&t.credits,o=null==o||o===!1?o:o.votes,o=null==o||o===!1?o:o.period,null==o||o===!1?o:o.end),i):p.call(t,"fromNow",(o=t&&t.credits,o=null==o||o===!1?o:o.votes,o=null==o||o===!1?o:o.period,null==o||o===!1?o:o.end),i)))+".</p>\n  "}function l(t,e){var o,a,i,r="";return r+="\n    <p>No remaining vote for the current period. Come back "+m((a=n.fromNow||t&&t.fromNow,i={hash:{},data:e},a?a.call(t,(o=t&&t.credits,o=null==o||o===!1?o:o.votes,o=null==o||o===!1?o:o.period,null==o||o===!1?o:o.end),i):p.call(t,"fromNow",(o=t&&t.credits,o=null==o||o===!1?o:o.votes,o=null==o||o===!1?o:o.period,null==o||o===!1?o:o.end),i)))+".</p>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),a=a||{};var u,d,c="",h="function",m=this.escapeExpression,p=n.helperMissing,f=this;return c+="<p><strong>",(d=n.votesSum)?u=d.call(e,{hash:{},data:a}):(d=e&&e.votesSum,u=typeof d===h?d.call(e,{hash:{},data:a}):d),c+=m(u)+"</strong> votes</p>\n\n",u=n["if"].call(e,e&&e.loggedIn,{hash:{},inverse:f.noop,fn:f.program(1,i,a),data:a}),(u||0===u)&&(c+=u),c+="\n"},Hull.component("votes/button@hull",{templates:["main"],refreshEvents:["model.hull.me.change"],requiredOptions:["id"],datasources:{target:":id",credits:function(){return this.loggedIn()?this.api("me/credits"):!1}},beforeRender:function(t){t.targetName=t.target.name||t.target.uid||t.target.id;var e=t.target.stats.votes||{};return t.votesSum=e.sum||0,t.credits!==!1?null==t.credits.votes?void(t.canVote=!0):void(0===t.credits.votes.remaining?t.noRemainingPeriod=!0:t.credits.votes.max_per_object&&t.credits.votes.max_per_object===t.credits.votes.credited[t.target.id]?t.noRemainingObject=!0:t.canVote=!0):void 0},actions:{vote:function(){this.working||(this.working=!0,this.api(this.options.id+"/votes","post").then(this.sandbox.util._.bind(function(){this.working=!1,this.render()},this),function(t){alert(t.responseJSON.message)}))}}});