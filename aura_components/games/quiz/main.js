this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["games/quiz/answer"]=function(t,n,e,i,s){this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),s=s||{};var a,r,l="",u="function",o=this.escapeExpression;return l+="<strong>",(r=e.name)?a=r.call(n,{hash:{},data:s}):(r=n&&n.name,a=typeof r===u?r.call(n,{hash:{},data:s}):r),l+=o(a)+"</strong>\n<span>",(r=e.description)?a=r.call(n,{hash:{},data:s}):(r=n&&n.description,a=typeof r===u?r.call(n,{hash:{},data:s}):r),l+=o(a)+"</span>\n"},Hull.templates._default["games/quiz/finished"]=function(t,n,e,i,s){return this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),s=s||{},'<div class="hull-quiz hull-quiz--finished">\n  <div class="page-header">\n    <h1>Congratulations. <small>You have finished the  quiz!</small></h1>\n  </div>\n\n    <ul class="pager">\n    <li>\n      <a href="#" data-hull-action="submit">Submit</a>\n    </li>\n  </ul>\n</div>\n'},Hull.templates._default["games/quiz/intro"]=function(t,n,e,i,s){function a(){return'\n    <button data-hull-action="start" class="btn btn-large btn-primary">Start</button>\n  '}function r(){return'\n      <div data-hull-component="login/profile@hull"></div>\n  '}this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),s=s||{};var l,u="",o="function",h=this.escapeExpression,d=this;return u+='<div class="hull-quiz hull-quiz--intro">\n  <div class="page-header">\n    <h1>'+h((l=n&&n.quiz,l=null==l||l===!1?l:l.name,typeof l===o?l.apply(n):l))+'</h1>\n    <p class="lead">'+h((l=n&&n.quiz,l=null==l||l===!1?l:l.description,typeof l===o?l.apply(n):l))+"</p>\n  </div>\n\n  ",l=e["if"].call(n,n&&n.loggedIn,{hash:{},inverse:d.program(3,r,s),fn:d.program(1,a,s),data:s}),(l||0===l)&&(u+=l),u+="\n\n</div>\n"},Hull.templates._default["games/quiz/question"]=function(t,n,e,i,s){function a(t,n){var i,s,a,l="";return l+="\n        ",a={hash:{},inverse:q.noop,fn:q.program(2,r,n),data:n},(s=e.question)?i=s.call(t,a):(s=t&&t.question,i=typeof s===m?s.call(t,a):s),e.question||(i=v.call(t,i,{hash:{},inverse:q.noop,fn:q.program(2,r,n),data:n})),(i||0===i)&&(l+=i),l+='\n\n      <ul class="pager">\n        ',i=e["if"].call(t,t&&t.previous,{hash:{},inverse:q.noop,fn:q.program(5,u,n),data:n}),(i||0===i)&&(l+=i),l+="\n\n        ",i=e["if"].call(t,t&&t.next,{hash:{},inverse:q.program(9,h,n),fn:q.program(7,o,n),data:n}),(i||0===i)&&(l+=i),l+="\n      </ul>\n\n    "}function r(t,n){var i,s,a,r="";return r+="\n          <h3>",(s=e.name)?i=s.call(t,{hash:{},data:n}):(s=t&&t.name,i=typeof s===m?s.call(t,{hash:{},data:n}):s),r+=g(i)+"</h3>\n          <p>",(s=e.description)?i=s.call(t,{hash:{},data:n}):(s=t&&t.description,i=typeof s===m?s.call(t,{hash:{},data:n}):s),r+=g(i)+"</p>\n          <ol>\n              ",a={hash:{},inverse:q.noop,fn:q.programWithDepth(3,l,n,t),data:n},(s=e.answers)?i=s.call(t,a):(s=t&&t.answers,i=typeof s===m?s.call(t,a):s),e.answers||(i=v.call(t,i,{hash:{},inverse:q.noop,fn:q.programWithDepth(3,l,n,t),data:n})),(i||0===i)&&(r+=i),r+="\n          </ol>\n        "}function l(t,n,s){var a,r,l="";return l+='\n              <li>\n                <div data-hull-action="answerAndNext"\n                    data-hull-answer-ref="',(r=e.ref)?a=r.call(t,{hash:{},data:n}):(r=t&&t.ref,a=typeof r===m?r.call(t,{hash:{},data:n}):r),l+=g(a)+'"\n                    data-hull-question-ref="'+g((a=s&&s.ref,typeof a===m?a.apply(t):a))+'" class="btn">\n                ',a=q.invokePartial(i["games/quiz/answer"],"games/quiz/answer",t,e,i,n),(a||0===a)&&(l+=a),l+="\n                </div>\n              </li>\n              "}function u(){return'\n          <li>\n            <a href="#" data-hull-action="previous">Previous</a>\n          </li>\n        '}function o(){return'\n          <li>\n            <a href="#" data-hull-action="next">Next</a>\n          </li>\n        '}function h(){return'\n          <li>\n            <a href="#" data-hull-action="submit">Submit</a>\n          </li>\n        '}this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),i=this.merge(i,t.partials),s=s||{};var d,c,p,f="",m="function",g=this.escapeExpression,q=this,v=e.blockHelperMissing;return f+='<div class="hull-quiz hull-quiz__question">\n  <div class="page-header">\n    <h1>'+g((d=n&&n.quiz,d=null==d||d===!1?d:d.name,typeof d===m?d.apply(n):d))+'</h1>\n    <p class="lead">'+g((d=n&&n.quiz,d=null==d||d===!1?d:d.description,typeof d===m?d.apply(n):d))+'</p>\n  </div>\n\n  <div class="hull-quiz__question--'+g((d=n&&n.current,d=null==d||d===!1?d:d.index,typeof d===m?d.apply(n):d))+'">\n    <h5>\n      Question '+g((d=n&&n.current,d=null==d||d===!1?d:d.indexDisplayable,typeof d===m?d.apply(n):d))+' <span class="muted">of '+g((d=n&&n.quiz,d=null==d||d===!1?d:d.questions,d=null==d||d===!1?d:d.length,typeof d===m?d.apply(n):d))+"</span>\n    </h5>\n\n    ",p={hash:{},inverse:q.noop,fn:q.program(1,a,s),data:s},(c=e.current)?d=c.call(n,p):(c=n&&n.current,d=typeof c===m?c.call(n,p):c),e.current||(d=v.call(n,d,{hash:{},inverse:q.noop,fn:q.program(1,a,s),data:s})),(d||0===d)&&(f+=d),f+="\n  </div>\n</div>\n"},Hull.templates._default["games/quiz/result"]=function(t,n,e,i,s){function a(t,n){var i,s,a="";return a+="\n    <h4>You Have <strong>",(s=e.score)?i=s.call(t,{hash:{},data:n}):(s=t&&t.score,i=typeof s===u?s.call(t,{hash:{},data:n}):s),a+=o(i)+"</strong> points !</h4>\n    <p>It took <strong>",(s=e.timing)?i=s.call(t,{hash:{},data:n}):(s=t&&t.timing,i=typeof s===u?s.call(t,{hash:{},data:n}):s),a+=o(i)+"</strong> seconds to answer !</p>\n  "}this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),s=s||{};var r,l="",u="function",o=this.escapeExpression,h=this,d=e.blockHelperMissing;return l+='<div class="hull-quiz hull-quiz--result">\n  <div class="page-header">\n    <h1>Congratulations</h1>\n  </div>\n\n  ',r=n&&n.badge,r=null==r||r===!1?r:r.data,r=typeof r===u?r.apply(n):r,r=d.call(n,r,{hash:{},inverse:h.noop,fn:h.program(1,a,s),data:s}),(r||0===r)&&(l+=r),l+='\n\n  <button class="btn" data-hull-action="share" data-hull-provider="twitter" data-hull-text="I just scored '+o((r=n&&n.result,r=null==r||r===!1?r:r.data,r=null==r||r===!1?r:r.score,typeof r===u?r.apply(n):r))+" in "+o((r=n&&n.result,r=null==r||r===!1?r:r.data,r=null==r||r===!1?r:r.timing,typeof r===u?r.apply(n):r))+" sec on Quiz: "+o((r=n&&n.result,r=null==r||r===!1?r:r.name,typeof r===u?r.apply(n):r))+'. Can you beat me?">Share your score on Twitter</button>\n  &nbsp;&nbsp;&nbsp;<small>or</small>\n  <button class="btn btn-link" data-hull-action="start">Try again</button>\n\n</div>\n'},Hull.component("games/quiz@hull",{requiredOptions:["id"],templates:["intro","question","answer","finished","result"],answers:{},datasources:{quiz:function(){return this.quiz||this.sandbox.data.api(this.id)},badge:function(){return this.badge||this.api("me/badges/"+this.id)}},trackingData:function(){var t={type:"quiz"},n=this.data.quiz;return n&&n.get&&(t.name=n.get("name")),t},initialize:function(){this.sandbox.on("hull.model."+this.id+".change",function(){this.render()}.bind(this)),this.sandbox.on("model.hull.me.change",function(){this.loggedIn()&&this.actions.start.apply(this)}.bind(this)),this.currentQuestionIndex=0,this.answers={}},beforeRender:function(t){return this.quiz=t.quiz,this.badge=t.badge||{},this.isInitialized||this.track("hull.quiz.init"),t.me&&t.me.id==this.currentUserId?(t.result=this.getResult(t),this.started&&(t.questions=this.getQuestions(t),t.current=this.getCurrent(t)),t):(this.template="intro",this.reset(),t)},afterRender:function(t){this.sandbox.emit("hull.quiz."+this.id,t)},startQuiz:function(){this.reset(),this.startedAt=new Date,this.started=!0,this.render("question")},reset:function(){this.quiz=null,this.badge=null,this.started=!1,this.submitted=!1,this.answers={},this.currentQuestionIndex=0,this.currentUserId=this.api.model("me").id},getTemplate:function(t,n){return t?t:this.loggedIn()?this.submitted&&n.badge&&n.badge.id?"result":n.current?n.current.question?"question":"finished":n.badge?"result":"intro":"intro"},getCurrent:function(t){return this.currentQuestion=t.questions[this.currentQuestionIndex],{index:this.currentQuestionIndex,indexDisplayable:this.currentQuestionIndex+1,question:this.currentQuestion,next:t.questions[this.currentQuestionIndex+1],previous:t.questions[this.currentQuestionIndex-1]}},getQuestions:function(t){return t.quiz.questions},getResult:function(t){return t.badge},actions:{login:function(t,n){this.sandbox.login(n.data.provider,n.data).then(this.startQuiz.bind(this))},answer:function(t,n){var e=n.data;this.answers[e.questionRef]=e.answerRef,this.data.quiz.answers=this.answers,this.track("hull.quiz.progress",{quizId:this.id,questionRef:e.questionRef,answerRef:e.answerRef,questionIndex:this.currentQuestionIndex,questionsCount:this.data.quiz.questions.length})},answerAndNext:function(){this.actions.answer.apply(this,arguments),this.actions.next.apply(this)},start:function(){this.track("hull.quiz.start",{quizId:this.id}),this.startQuiz()},next:function(){return this.currentQuestionIndex+=1,this.render(),!1},previous:function(){return this.currentQuestionIndex>0&&(this.currentQuestionIndex-=1,this.render("question")),!1},submit:function(){this.track("hull.quiz.submit",{quizId:this.id});var t=0;this.startedAt&&(t=(new Date-this.startedAt)/1e3);var n=this.api(this.id+"/achieve","post",{answers:this.answers,timing:t}),e=this;return n.done(function(t){t&&(e.submitted=!0,e.badge=t,e.render("result"),e.track("hull.quiz.finish",{quizId:this.id,score:t.data.score,timing:t.data.timing}))}),!1},share:function(t,n){var e=n.data,i=document.URL,s=e.text;switch(e.provider){case"facebook":break;case"twitter":window.open("https://twitter.com/share?url="+i+"&text="+s)}}}});