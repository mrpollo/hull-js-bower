this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["admin/users_list/forbidden"]=function(t,a,e,n,s){return this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),s=s||{},"<h1>You are not authorized to list users...</h1>\n"},Hull.templates._default["admin/users_list/users_list"]=function(t,a,e,n,s){function r(t,a){var n,s="";return s+='\n  <div class="btn-group pull-right users-filters" data-toggle="buttons-radio">\n    ',n=e.each.call(t,t&&t.filters,{hash:{},inverse:x.noop,fn:x.program(2,i,a),data:a}),(n||0===n)&&(s+=n),s+="\n  </div>\n"}function i(t,a){var n,s,r="";return r+='\n      <button type="button" class="btn btn-small ',n=e["if"].call(t,t&&t.isActive,{hash:{},inverse:x.noop,fn:x.program(3,l,a),data:a}),(n||0===n)&&(r+=n),r+='" data-hull-action="',(s=e.action)?n=s.call(t,{hash:{},data:a}):(s=t&&t.action,n=typeof s===w?s.call(t,{hash:{},data:a}):s),r+=H(n)+'">'+H((n=null==a||a===!1?a:a.key,typeof n===w?n.apply(t):n))+"</button>\n    "}function l(){return"active"}function o(t){var a,e="";return e+="\n<p><small>Result for: <strong>"+H((a=t&&t.currentQuery,a=null==a||a===!1?a:a.email,typeof a===w?a.apply(t):a))+'</strong>. <a href="#" data-hull-action="resetSearch">clear</a></small></p>\n'}function u(t,a){var n,s="";return s+='\n<ul class="nav nav-tabs nav-stacked list list-user">\n  ',n=e.each.call(t,t&&t.users,{hash:{},inverse:x.noop,fn:x.program(8,h,a),data:a}),(n||0===n)&&(s+=n),s+="\n</ul>\n"}function h(t,a){var n,s,r,i="";return i+='\n    <li>\n      <a href="#" data-hull-action="selectUser" data-hull-id="',(s=e.id)?n=s.call(t,{hash:{},data:a}):(s=t&&t.id,n=typeof s===w?s.call(t,{hash:{},data:a}):s),i+=H(n)+'">\n          <div class="media">\n            ',n=e["if"].call(t,t&&t.picture,{hash:{},inverse:x.noop,fn:x.program(9,c,a),data:a}),(n||0===n)&&(i+=n),i+='\n            <div class="media-body">\n              <h5 class="media-heading">\n                <span class="name">',(s=e.name)?n=s.call(t,{hash:{},data:a}):(s=t&&t.name,n=typeof s===w?s.call(t,{hash:{},data:a}):s),i+=H(n)+"</span>\n                ",n=e["if"].call(t,t&&t.email,{hash:{},inverse:x.noop,fn:x.program(11,d,a),data:a}),(n||0===n)&&(i+=n),i+='\n\n              </h5>\n\n              <ul class="unstyled">\n                <li><strong>Created: </strong>'+H((s=e.fromNow||t&&t.fromNow,r={hash:{},data:a},s?s.call(t,t&&t.created_at,r):P.call(t,"fromNow",t&&t.created_at,r)))+"</li>\n                ",n=e["if"].call(t,t&&t.username,{hash:{},inverse:x.noop,fn:x.program(13,p,a),data:a}),(n||0===n)&&(i+=n),i+="\n                ",n=e["if"].call(t,t&&t.identities,{hash:{},inverse:x.noop,fn:x.program(15,f,a),data:a}),(n||0===n)&&(i+=n),i+='\n                <li class="sign-in-count"><strong>Sign in count: </strong>'+H((n=t&&t.stats,n=null==n||n===!1?n:n.sign_in_count,typeof n===w?n.apply(t):n))+'</li>\n              </ul>\n\n            </div>\n          </div>\n          <i class="icon-chevron-right"></i>\n        </a>\n    </li>\n  '}function c(t,a){var n,s,r="";return r+='\n              <div class="pull-left">\n                <img src="',(s=e.picture)?n=s.call(t,{hash:{},data:a}):(s=t&&t.picture,n=typeof s===w?s.call(t,{hash:{},data:a}):s),r+=H(n)+'" width="50" height="50"/>\n              </div>\n            '}function d(t,a){var n,s,r="";return r+=' <small class="email">',(s=e.email)?n=s.call(t,{hash:{},data:a}):(s=t&&t.email,n=typeof s===w?s.call(t,{hash:{},data:a}):s),r+=H(n)+"</small> "}function p(t,a){var n,s,r="";return r+="<li><strong>Username:</strong> ",(s=e.username)?n=s.call(t,{hash:{},data:a}):(s=t&&t.username,n=typeof s===w?s.call(t,{hash:{},data:a}):s),r+=H(n)+"</li>"}function f(t,a){var n,s,r,i="";return i+='\n                  <li class="provider"><strong>Provider: </strong>\n                    ',r={hash:{},inverse:x.noop,fn:x.program(16,m,a),data:a},(s=e.identities)?n=s.call(t,r):(s=t&&t.identities,n=typeof s===w?s.call(t,r):s),e.identities||(n=Q.call(t,n,{hash:{},inverse:x.noop,fn:x.program(16,m,a),data:a})),(n||0===n)&&(i+=n),i+="\n                  </li>\n                "}function m(t,a){var n,s,r,i="";return i+='\n                      <i class="icon-',(s=e.type)?n=s.call(t,{hash:{},data:a}):(s=t&&t.type,n=typeof s===w?s.call(t,{hash:{},data:a}):s),i+=H(n)+'"></i> '+H((s=e.humanize||t&&t.humanize,r={hash:{},data:a},s?s.call(t,t&&t.type,r):P.call(t,"humanize",t&&t.type,r)))+"\n                    "}function v(){return'\n  <p class="m2 muted text-center">There is no user that match your criteria</p>\n'}function g(t,a){var n,s="";return s+="\n  <p>\n    ",n=e["if"].call(t,t&&t.showPreviousButton,{hash:{},inverse:x.noop,fn:x.program(21,y,a),data:a}),(n||0===n)&&(s+=n),s+="\n    ",n=e["if"].call(t,t&&t.showNextButton,{hash:{},inverse:x.noop,fn:x.program(23,b,a),data:a}),(n||0===n)&&(s+=n),s+="\n  </p>\n"}function y(){return"\n      <button data-hull-action='previousPage' class=\"btn\">← Previous</button>\n    "}function b(){return"\n      <button data-hull-action='nextPage' class=\"btn\">Next →</button>\n    "}this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),s=s||{};var _,q="",x=this,w="function",H=this.escapeExpression,P=e.helperMissing,Q=e.blockHelperMissing;return q+='<div class="btn-group pull-right">\n  <a class="btn btn-small dropdown-toggle" data-toggle="dropdown" href="#">\n    Sort by <span class="caret"></span>\n  </a>\n  <ul class="dropdown-menu">\n    <li><a href="#" data-hull-action="sort" data-hull-field="created_at" data-hull-direction="desc">Created At</a></li>\n    <li><a href="#" data-hull-action="sort" data-hull-field="name">Name</a></li>\n    <li><a href="#" data-hull-action="sort" data-hull-field="email">Email</a></li>\n    <li><a href="#" data-hull-action="sort" data-hull-field="stats.sign_in_count" data-hull-direction="desc">Sign In Count</a></li>\n  </ul>\n</div>\n\n',_=e.unless.call(a,(_=a&&a.org,null==_||_===!1?_:_["public"]),{hash:{},inverse:x.noop,fn:x.program(1,r,s),data:s}),(_||0===_)&&(q+=_),q+='\n\n<form class="form form-search js-hull-users-search">\n  <input type="text" class="js-hull-users-search-query" placeholder="Search by email" value="'+H((_=a&&a.currentQuery,_=null==_||_===!1?_:_.email,typeof _===w?_.apply(a):_))+'">\n  <button type="submit" class="btn">Search</button>\n</form>\n\n',_=e["if"].call(a,(_=a&&a.currentQuery,null==_||_===!1?_:_.email),{hash:{},inverse:x.noop,fn:x.program(5,o,s),data:s}),(_||0===_)&&(q+=_),q+="\n\n",_=e["if"].call(a,a&&a.users,{hash:{},inverse:x.program(18,v,s),fn:x.program(7,u,s),data:s}),(_||0===_)&&(q+=_),q+="\n\n",_=e["if"].call(a,a&&a.showPagination,{hash:{},inverse:x.noop,fn:x.program(20,g,s),data:s}),(_||0===_)&&(q+=_),q+="\n"},Hull.component("admin/users_list@hull",{type:"Hull",templates:["users_list"],refreshEvents:["model.hull.me.change"],renderError:function(t){401===t.message.status&&this.html("You are not authorized to list users")},datasources:{users:{provider:"admin@:namespace",path:"users"}},initialize:function(){this.query={},this.currentQuery={}},beforeRender:function(t){var a=this.datasources.users;t.showPagination=a.isPaginable(),t.showNextButton=!a.isLast(),t.showPreviousButton=!a.isFirst(),t.currentQuery=this.currentQuery,t.filters={All:{action:"resetFilter",isActive:null==this.query.approved},Approved:{action:"filterApproved",isActive:this.query.approved===!0},Unapproved:{action:"filterUnapproved",isActive:this.query.approved===!1}}},afterRender:function(){var t=this.$(".js-hull-users-search");t.on("submit",this.sandbox.util._.bind(function(a){a.preventDefault(),this.search(t.find(".js-hull-users-search-query").val())},this))},actions:{nextPage:function(){var t=this.datasources.users;t.isLast()||(t.next(),this.render())},previousPage:function(){var t=this.datasources.users;t.isFirst()||(t.previous(),this.render())},selectUser:function(t,a){this.sandbox.emit("hull.user.select",a.data.id)},sort:function(t,a){this.sort(a.data.field,a.data.direction)},resetSearch:function(){delete this.query.email,this.filter()},resetFilter:function(){delete this.query.approved,this.filter()},filterApproved:function(){this.query.approved=!0,this.filter()},filterUnapproved:function(){this.query.approved=!1,this.filter()}},sort:function(t,a){this.datasources.users.sort(t,a),this.render()},filter:function(){this.queryHasChanged()&&(this.datasources.users.where(this.query),this.render(),this.currentQuery=this.sandbox.util._.clone(this.query))},queryHasChanged:function(){var t=this.sandbox.util._;return t.isEmpty(this.query)&&t.isEmpty(this.currentQuery)?!1:t.size(this.query)!==t.size(this.currentQuery)?!0:!this.sandbox.util._.every(this.query,function(t,a){return this.currentQuery[a]===t},this)},search:function(t){this.sandbox.util._.string.isBlank(t)?delete this.query.email:this.query.email=t,this.filter()}});