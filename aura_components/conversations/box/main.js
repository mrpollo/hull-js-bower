this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["conversations/box/box"]=function(t,n,e,a,i){function s(t,n){var a,i,s,c="";return c+='\n    <form data-hull-item="form">\n      <div class=\'media\'>\n        <div class="pull-left">\n          <img class="media-object img-rounded" src="'+g((a=t&&t.me,a=null==a||a===!1?a:a.picture,typeof a===m?a.apply(t):a))+'" alt="'+g((a=t&&t.me,a=null==a||a===!1?a:a.name,typeof a===m?a.apply(t):a))+'" width="70" height="70">\n        </div>\n        <div class="media-body">\n          <textarea name=\'body\' class="input-block-level" rows="3" placeholder="Send a message... "></textarea>\n          <button data-hull-action="message" data-hull-id="'+g((a=t&&t.conversation,a=null==a||a===!1?a:a.id,typeof a===m?a.apply(t):a))+'" class="btn btn-primary btn-small">\n            ',a=e["if"].call(t,t&&t.isNew,{hash:{},inverse:v.program(4,o,n),fn:v.program(2,l,n),data:n}),(a||0===a)&&(c+=a),c+=" ",s={hash:{},inverse:v.noop,fn:v.program(6,r,n),data:n},(i=e.me)?a=i.call(t,s):(i=t&&t.me,a=typeof i===m?i.call(t,s):i),e.me||(a=b.call(t,a,{hash:{},inverse:v.noop,fn:v.program(6,r,n),data:n})),(a||0===a)&&(c+=a),c+="\n          </button> \n\n          ",a=e["if"].call(t,(a=t&&t.conversation,null==a||a===!1?a:a.notification_enabled),{hash:{},inverse:v.noop,fn:v.program(8,d,n),data:n}),(a||0===a)&&(c+=a),c+="\n        </div>\n      </div>\n    </form>\n  "}function l(){return"Send"}function o(){return"Reply"}function r(t,n){var a,i,s="";return s+="as ",(i=e.name)?a=i.call(t,{hash:{},data:n}):(i=t&&t.name,a=typeof i===m?i.call(t,{hash:{},data:n}):i),s+=g(a)}function d(t,n){var a,i="";return i+="\n            ",a=e["if"].call(t,(a=t&&t.conversation,null==a||a===!1?a:a.notification_enabled_user),{hash:{},inverse:v.program(11,u,n),fn:v.program(9,c,n),data:n}),(a||0===a)&&(i+=a),i+="\n          "}function c(){return'\n            <div class="pull-right">\n              <a class="btn-link" data-hull-action="disableNotifications">\n                <span class="text-success">\n                  Notifications enabled\n                </span>\n              </a>\n            </div>\n            '}function u(){return'\n            <div class="pull-right">\n              <a class="btn-link muted" data-hull-action="enableNotifications">\n                <span class="muted">\n                  Notifications muted\n                </span>\n              </a>\n            </div>\n            '}function f(){return'\n    <div data-hull-component="login/button@hull"></div>\n  '}this.compilerInfo=[4,">= 1.0.0"],e=this.merge(e,t.helpers),i=i||{};var h,p="",m="function",g=this.escapeExpression,v=this,b=e.blockHelperMissing;return p+='<div class="well">\n  ',h=e["if"].call(n,n&&n.loggedIn,{hash:{},inverse:v.program(13,f,i),fn:v.program(1,s,i),data:i}),(h||0===h)&&(p+=h),p+="\n</div>\n"},Hull.component("conversations/box@hull",{type:"Hull",templates:["box"],refreshEvents:["model.hull.me.change"],actions:{message:"message",enableNotifications:"enableNotifications",disableNotifications:"disableNotifications"},options:{focus:!0},getMessagesParams:function(){var t={};return this.options.limit&&(t.per_page=this.options.limit),t},afterRender:function(){(this.options.focus||this.focusAfterRender)&&(this.$el.find("input,textarea").focus(),this.focusAfterRender=!1)},toggleLoading:function(t){var n=t.toggleClass("is-loading"),e=n.find(".btn");e.attr("disabled",!e.attr("disabled"));var a=n.find("textarea");a.attr("disabled",!a.attr("disabled"))},message:function(t,n){t.preventDefault();var e=this,a=this.$el.find("[data-hull-item='form']"),i=this.sandbox.dom.getFormData(a),s=i.body;if(this.toggleLoading(a),s&&s.length>0){var l=n.data.id,o={body:s};this.api(l+"/messages","post",o).then(function(){e.toggleLoading(a),e.render()})}else this.toggleLoading(a)},deleteMsg:function(t,n){t.preventDefault();var e=n.data.id,a=n.el.addClass("is-removing").parents('[data-hull-message-id="'+e+'"]');this.api(e,"delete").then(function(){a.remove()})},"delete":function(t,n){event.preventDefault();var e=n.data.id,a=this;this.api(e,"delete").then(function(){a.sandbox.emit("hull.conversation.thread.delete",{id:e,cid:a.cid})})},disableNotifications:function(){var t=this;this.api(this.options.id+"/notifications","delete").then(function(){t.render()})},enableNotifications:function(){var t=this;this.api(this.options.id+"/notifications","put").then(function(){t.render()})}});