this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["ratings/vote/vote"]=function(t,e,n,o,s){function a(t,e){var o,s,a,u="";return u+="\n<div class='btn-group'>\n  <button class=\"btn btn-small "+h((s=n.outputIf||t&&t.outputIf,a={hash:{},data:e},s?s.call(t,t&&t.myVote,1,"btn-success",a):d.call(t,"outputIf",t&&t.myVote,1,"btn-success",a)))+' dropup" ',o=n.unless.call(t,t&&t.loggedIn,{hash:{},inverse:c.noop,fn:c.program(2,i,e),data:e}),(o||0===o)&&(u+=o),u+=" data-hull-action='"+h((s=n.outputIf||t&&t.outputIf,a={hash:{},data:e},s?s.call(t,t&&t.myVote,1,"unvote","upvote",a):d.call(t,"outputIf",t&&t.myVote,1,"unvote","upvote",a)))+"'><span class='caret'></span>&nbsp;"+h((o=t&&t.votes,o=null==o||o===!1?o:o.up,typeof o===v?o.apply(t):o))+'</button>\n  <button class="btn btn-small '+h((s=n.outputIf||t&&t.outputIf,a={hash:{},data:e},s?s.call(t,t&&t.myVote,-1,"btn-success",a):d.call(t,"outputIf",t&&t.myVote,-1,"btn-success",a)))+' dropdown" ',o=n.unless.call(t,t&&t.loggedIn,{hash:{},inverse:c.noop,fn:c.program(2,i,e),data:e}),(o||0===o)&&(u+=o),u+=" data-hull-action='"+h((s=n.outputIf||t&&t.outputIf,a={hash:{},data:e},s?s.call(t,t&&t.myVote,-1,"unvote","downvote",a):d.call(t,"outputIf",t&&t.myVote,-1,"unvote","downvote",a)))+"'><span class='caret'></span>&nbsp;"+h((o=t&&t.votes,o=null==o||o===!1?o:o.down,typeof o===v?o.apply(t):o))+"</button>\n</div>\n"}function i(){return"disabled"}function u(){return"\n  <p>Can not find the object to rate</p>\n"}function l(){return'\n  <div data-hull-component="login/button@hull"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var p,r="",d=n.helperMissing,h=this.escapeExpression,c=this,v="function";return p=n["if"].call(e,e&&e.target,{hash:{},inverse:c.program(4,u,s),fn:c.program(1,a,s),data:s}),(p||0===p)&&(r+=p),r+="\n",p=n.unless.call(e,e&&e.loggedIn,{hash:{},inverse:c.noop,fn:c.program(6,l,s),data:s}),(p||0===p)&&(r+=p),r+="\n"},Hull.component("ratings/vote@hull",{type:"Hull",refreshEvents:["model.hull.me.change"],templates:["vote"],datasources:{myReview:function(){return this.loggedIn()&&this.options.id?this.api(this.options.id+"/reviews/me"):!1},target:":id"},initialize:function(){this.sandbox.on("hull.reviews."+this.options.id+".**",function(){this.render()},this)},beforeRender:function(t){var e={up:0,down:0};if(t.target&&t.target.stats&&t.target.stats.reviews){var n=t.target.stats.reviews;n.distribution&&(e={down:n.distribution[-1]||0,up:n.distribution[1]||0})}return t.myReview&&(t.myVote=t.myReview.rating),t.votes=e,t},update_vote:function(t,e){t.stopPropagation();var n=this.$el.find("textarea").val(),o=this;if(void 0!=e){var s={rating:e,description:n};this.api(this.options.id+"/reviews","post",s).then(function(t){o.sandbox.emit("hull.reviews."+o.options.id+".updated",t)})}},actions:{downvote:function(t){this.update_vote(t,-1)},unvote:function(t){this.update_vote(t,0)},upvote:function(t){this.update_vote(t,1)}}});