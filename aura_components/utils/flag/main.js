this.Hull=this.Hull||{},this.Hull.templates=this.Hull.templates||{},this.Hull.templates._default=this.Hull.templates._default||{},Hull.templates._default["utils/flag/main"]=function(t,e,a,i,s){function l(t,e){var i,s,l="";return l+='\n  <span class="label btn btn-danger ',(s=a.flagState)?i=s.call(t,{hash:{},data:e}):(s=t&&t.flagState,i=typeof s===r?s.call(t,{hash:{},data:e}):s),l+=h(i)+'" data-hull-action="flag">Flag</span>\n'}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,t.helpers),s=s||{};var n,o="",r="function",h=this.escapeExpression,u=this;return n=a["if"].call(e,e&&e.loggedIn,{hash:{},inverse:u.noop,fn:u.program(1,l,s),data:s}),(n||0===n)&&(o+=n),o+="\n"},Hull.component("utils/flag@hull",{type:"Hull",templates:["main"],refreshEvents:["model.hull.me.change"],datasources:{flaggedByMe:function(){"use strict";return this.loggedIn()?this.hasFlagsByMe():!1}},options:{text:"Do you want to report this content as inappropriate?"},initialize:function(){"use strict";if(!this.options.id)throw new Error("Missing id of the object to flag")},beforeRender:function(t){"use strict";t.flagState=t.flaggedByMe?"disabled":""},actions:{flag:function(){"use strict";var t=this;!this.data.flaggedByMe&&confirm(this.options.text)&&this.api.post(this.options.id+"/flag").then(function(){t.render()})}},hasFlagsByMe:function(){"use strict";var t=this.sandbox.util._.filter,e=this.sandbox.data.deferred(),a=this.options.id+"/flags",i=this.api.model("me").get("id");return this.api(a).then(function(a){var s=t(a,function(t){return t.reporter_id===i});e.resolve(s.length>0)}),e}});